apply plugin: 'scala'

repositories {
  mavenCentral()
}

dependencies {
  testCompile group: 'org.scalatest', name: 'scalatest_2.10', version: '2.0.M5b'
  compile 'org.scala-lang:scala-library:2.10.2'
}

compileScala {
   // this should make repeated compilation a bit faster
   //scalaCompileOptions.useCompileDaemon = true
}

task test(overwrite: true, dependsOn: compileTestScala) << {
  ant.taskdef(
    name: 'scalatest',
    classname: 'org.scalatest.tools.ScalaTestAntTask',
    classpath: configurations.testRuntime.asPath+':'+compileScala.destinationDir
  )
  ant.scalatest(
    runpath: sourceSets.test.output.classesDir,
    haltonfailure: 'true',
    fork: 'false'
  ) {
    jvmarg(value: '-XX:MaxPermSize=512M')
    reporter(type: 'stderr', config: 'F')
  }
}

